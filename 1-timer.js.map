{"version":3,"file":"1-timer.js","sources":["../src/js/refs.js","../src/js/1-timer.js"],"sourcesContent":["export const refs = {\n    input: document.querySelector('#datetime-picker'),\n    startBtn: document.querySelector('button[data-start]'),\n    timer: document.querySelector('.timer')\n}","import flatpickr from \"flatpickr\";\nimport { refs } from \"./refs\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nlet userSelectedDate = null;\nrefs.startBtn.disabled = true;\n\nconst timerValues = {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n};\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero({ days, hours, minutes, seconds }) {\n    return {\n        days: String(days).padStart(2, '0'),\n        hours: String(hours).padStart(2, '0'),\n        minutes: String(minutes).padStart(2, '0'),\n        seconds: String(seconds).padStart(2, '0'),\n    };\n}\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        const currentDate = new Date();\n\n        if (currentDate > selectedDates[0]) {\n            iziToast.error({\n                position: 'topRight',\n                message: 'Please choose a date in the future'\n            });\n\n            refs.startBtn.disabled = true;\n            return;\n        }\n\n        // const diff = selectedDates[0] - currentDate;\n        refs.startBtn.disabled = false;\n        userSelectedDate = selectedDates[0].getTime();\n\n    },\n};\n\n\nconst fp = flatpickr(refs.input, options);\nrefs.startBtn.addEventListener('click', handleClick)\n\nfunction handleClick(e) {\n    e.target.disabled = true;\n    fp.destroy();\n    countdownTimer(userSelectedDate);\n\n}\n\nfunction renderTimer(ms) {\n    const currentTime = addLeadingZero(convertMs(ms));\n    timerValues.seconds.innerHTML = currentTime.seconds;\n    timerValues.minutes.innerHTML = currentTime.minutes;\n    timerValues.hours.innerHTML = currentTime.hours;\n    timerValues.days.innerHTML = currentTime.days;\n}\n\nfunction countdownTimer(endTime) {\n\n    const delay = 1000;\n    const countdown = setInterval(() => {\n\n        const timeLeft = endTime - Date.now();\n\n        if (timeLeft <= 0) {\n            clearInterval(countdown);\n\n            iziToast.success({\n                title: 'Timer has over',\n                position: 'topRight'\n            })\n            flatpickr(refs.input, options);\n\n            return;\n        }\n        renderTimer(timeLeft);\n    }, delay)\n}\n\n\n\n\n\n\n\n\n"],"names":["refs","userSelectedDate","timerValues","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","options","selectedDates","iziToast","fp","flatpickr","handleClick","countdownTimer","renderTimer","currentTime","endTime","countdown","timeLeft"],"mappings":"iyBAAO,MAAMA,EAAO,CAChB,MAAO,SAAS,cAAc,kBAAkB,EAChD,SAAU,SAAS,cAAc,oBAAoB,EACrD,MAAO,SAAS,cAAc,QAAQ,CAC1C,ECEA,IAAIC,EAAmB,KACvBD,EAAK,SAAS,SAAW,GAEzB,MAAME,EAAc,CAChB,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EAEA,SAASC,EAAUC,EAAI,CAQnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C,CAEA,SAASC,EAAe,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACvD,MAAO,CACH,KAAM,OAAOH,CAAI,EAAE,SAAS,EAAG,GAAG,EAClC,MAAO,OAAOC,CAAK,EAAE,SAAS,EAAG,GAAG,EACpC,QAAS,OAAOC,CAAO,EAAE,SAAS,EAAG,GAAG,EACxC,QAAS,OAAOC,CAAO,EAAE,SAAS,EAAG,GAAG,CAChD,CACA,CAEA,MAAME,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAGnB,GAFoB,IAAI,KAENA,EAAc,CAAC,EAAG,CAChCC,EAAS,MAAM,CACX,SAAU,WACV,QAAS,oCACzB,CAAa,EAEDZ,EAAK,SAAS,SAAW,GACzB,MACH,CAGDA,EAAK,SAAS,SAAW,GACzBC,EAAmBU,EAAc,CAAC,EAAE,QAAO,CAE9C,CACL,EAGME,EAAKC,EAAUd,EAAK,MAAOU,CAAO,EACxCV,EAAK,SAAS,iBAAiB,QAASe,CAAW,EAEnD,SAASA,EAAY,EAAG,CACpB,EAAE,OAAO,SAAW,GACpBF,EAAG,QAAO,EACVG,EAAef,CAAgB,CAEnC,CAEA,SAASgB,EAAYb,EAAI,CACrB,MAAMc,EAAcT,EAAeN,EAAUC,CAAE,CAAC,EAChDF,EAAY,QAAQ,UAAYgB,EAAY,QAC5ChB,EAAY,QAAQ,UAAYgB,EAAY,QAC5ChB,EAAY,MAAM,UAAYgB,EAAY,MAC1ChB,EAAY,KAAK,UAAYgB,EAAY,IAC7C,CAEA,SAASF,EAAeG,EAAS,CAG7B,MAAMC,EAAY,YAAY,IAAM,CAEhC,MAAMC,EAAWF,EAAU,KAAK,IAAG,EAEnC,GAAIE,GAAY,EAAG,CACf,cAAcD,CAAS,EAEvBR,EAAS,QAAQ,CACb,MAAO,iBACP,SAAU,UAC1B,CAAa,EACDE,EAAUd,EAAK,MAAOU,CAAO,EAE7B,MACH,CACDO,EAAYI,CAAQ,CACvB,EAAE,GAAK,CACZ"}